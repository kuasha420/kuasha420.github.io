<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purrfect Universe | Economic Framework Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a1a;
            color: #e0e0e0;
            overflow-x: hidden;
            position: relative;
        }
        @keyframes move-stars {
            from { background-position: 0 0; }
            to { background-position: -10000px 5000px; }
        }
        .stars {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; display: block;
            background: transparent url('https://www.transparenttextures.com/patterns/stardust.png') repeat top left;
            animation: move-stars 200s linear infinite; z-index: 0; opacity: 0.5;
        }
        .content-wrapper { position: relative; z-index: 1; }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .text-gradient {
            background-image: linear-gradient(to right, #8e44ad, #3498db, #1abc9c);
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .card {
            background: rgba(23, 23, 43, 0.5); backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1); transition: all 0.3s ease;
        }
        .btn {
            background-color: #8e44ad; color: white; font-weight: 600; padding: 0.75rem 1.5rem;
            border-radius: 9999px; transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(142, 68, 173, 0.3);
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(142, 68, 173, 0.5); }
        .btn:disabled { background-color: #4a235a; cursor: not-allowed; transform: none; box-shadow: none; }
        .option-btn {
            display: block; width: 100%; text-align: left; padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 0.5rem;
            background-color: rgba(255, 255, 255, 0.05); transition: all 0.2s ease;
        }
        .option-btn:hover:not(:disabled) { background-color: rgba(142, 68, 173, 0.3); border-color: #8e44ad; }
        .option-btn.correct { background-color: #1abc9c; border-color: #16a085; color: white; font-weight: bold; }
        .option-btn.incorrect { background-color: #e74c3c; border-color: #c0392b; color: white; font-weight: bold; }

        /* Slider styles */
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]:focus { outline: none; }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 8px; cursor: pointer; background: #3c1e4a; border-radius: 5px;
        }
        input[type=range]::-webkit-slider-thumb {
            height: 24px; width: 24px; border-radius: 50%; background: #9b59b6;
            cursor: pointer; -webkit-appearance: none; margin-top: -8px;
            box-shadow: 0 0 10px rgba(155, 89, 182, 0.7);
        }
    </style>
</head>
<body class="bg-[#0a0a1a]">
    <div class="stars"></div>
    <div class="content-wrapper min-h-screen flex flex-col items-center justify-center p-4">

        <div id="quiz-container" class="w-full max-w-3xl">
            <!-- Header -->
            <header class="text-center mb-8">
                <h1 class="font-orbitron text-4xl md:text-5xl font-bold tracking-wider text-white">
                    Economic Framework Quiz
                </h1>
                <p class="mt-4 text-lg text-gray-300">Test your knowledge of Articles IX, IX-A, and IX-B.</p>
            </header>

            <!-- Quiz Setup -->
            <div id="setup-screen" class="card rounded-2xl p-8 text-center">
                <h2 class="text-2xl font-bold text-white mb-4">Quiz Settings</h2>
                <div class="mb-6">
                    <label for="question-slider" class="block mb-2 text-lg text-gray-300">Number of Questions: <span id="slider-value" class="font-bold text-cyan-300">10</span></label>
                    <input id="question-slider" type="range" min="0" max="4" value="0" step="1" class="w-full">
                    <div class="w-full flex justify-between text-xs text-gray-400 px-1 mt-2">
                        <span>10</span><span>20</span><span>30</span><span>40</span><span>50</span>
                    </div>
                </div>
                <button id="start-btn" class="btn">Start Quiz</button>
            </div>

            <!-- Quiz Screen -->
            <div id="quiz-screen" class="hidden">
                <div class="flex justify-between items-center mb-4">
                    <div id="progress-text" class="font-bold text-cyan-300"></div>
                    <a href="purrfect-universe-article-xv-a.html" class="text-sm text-purple-300 hover:text-purple-200">&larr; Back to Framework</a>
                </div>
                <div class="card rounded-2xl p-8">
                    <h2 id="question-text" class="text-xl md:text-2xl font-semibold text-white mb-6"></h2>
                    <div id="options-container" class="space-y-4"></div>
                    <div id="explanation-container" class="mt-6 hidden">
                        <p class="font-bold text-lg text-white">Explanation:</p>
                        <p id="explanation-text" class="text-gray-300 mt-2"></p>
                    </div>
                </div>
                <div class="text-center mt-6">
                    <button id="next-btn" class="btn" disabled>Next Question</button>
                </div>
            </div>

            <!-- Results Screen -->
            <div id="results-screen" class="hidden text-center">
                <div class="card rounded-2xl p-8">
                    <h2 class="font-orbitron text-3xl text-white mb-2">Quiz Complete!</h2>
                    <p class="text-2xl text-cyan-300 font-bold mb-4" id="score-text"></p>
                    <p class="text-xl text-purple-300 mb-6" id="grade-text"></p>
                    <button id="restart-btn" class="btn">Try Again</button>
                </div>
                <div id="results-summary" class="mt-8 text-left"></div>
            </div>

        </div>
    </div>

    <script>
        const allQuestions = [
            {
                question: "What is the maximum net profit margin a planet is allowed to have under Article IX?",
                options: ["3%", "5%", "10%", "There is no limit"],
                correctAnswer: "5%",
                explanation: "Article IX §1 explicitly states that the net profit margin for all planets is capped at 5% of total revenue to prioritize sustainability over extraction."
            },
            {
                question: "Profit earned beyond the constitutional cap is called:",
                options: ["Overflow", "Bonus", "Surplus", "Reserve"],
                correctAnswer: "Surplus",
                explanation: "According to Article IX §2, any profit exceeding the 5% margin is defined as 'Surplus' and becomes eligible for redistribution."
            },
            {
                question: "What is the Universal Infrastructure Contribution (UIC)?",
                options: ["A donation to charity", "A tax paid to a local government", "A fee of up to 5% of revenue for shared systems", "A 10% profit share for founders"],
                correctAnswer: "A fee of up to 5% of revenue for shared systems",
                explanation: "The UIC is a contribution of up to 5% of a planet's revenue to the Universal Treasury to maintain shared resources like legal, brand IP, and AI systems (Article IX-A §2.2 B)."
            },
            {
                question: "The Universal Support Pool (USP) is primarily funded by:",
                options: ["Founder contributions", "A 10-20% share of a planet's Surplus", "External investors", "A flat universal tax"],
                correctAnswer: "A 10-20% share of a planet's Surplus",
                explanation: "Article X §1 specifies that planets with surplus profits contribute 10-20% of that surplus to the USP to act as a universal safety net."
            },
            {
                question: "What is 'Sweat Equity' in the Purrfect Universe?",
                options: ["Physical labor on a project", "An employee investment mechanism using salary", "A type of cryptocurrency", "A bonus for working overtime"],
                correctAnswer: "An employee investment mechanism using salary",
                explanation: "The Sweat Equity Program allows employees to invest a portion of their net salary, which is converted into Planet Credits (PCs), representing ownership (Article IX-A §4.1)."
            },
            {
                question: "At which Seed Stage can a planet start accepting ethically-aligned external investors?",
                options: ["Stage 0 (Conception)", "Stage 1 (Operational)", "Stage 2 (Profitability)", "Stage 4 (Universal Alignment)"],
                correctAnswer: "Stage 2 (Profitability)",
                explanation: "Article IX-A §5 outlines that external investors are eligible to participate from Seed Stage 2 onwards, after the planet is post break-even and has passed an Ethical Alignment Test."
            },
            {
                question: "According to the standard redistribution model in Article IX-B, what percentage of surplus is allocated to Employees?",
                options: ["10%", "20%", "30%", "40%"],
                correctAnswer: "30%",
                explanation: "Article IX-B §3 specifies that 30% of the distributable surplus is allocated to active and eligible employees, weighted by their Planet Credits and tenure."
            },
            {
                question: "What is the 'Human First Clause' in Article IX-B?",
                options: ["Humans must be hired over AI", "Employee redistributions are paid before external investor returns", "All products must be tested by humans", "Human resources has final say on budgets"],
                correctAnswer: "Employee redistributions are paid before external investor returns",
                explanation: "The Human First Clause (Article IX-B §5) is an ethical rule ensuring that the people who built the value (employees) receive their share of profits before any capital investors."
            },
            {
                question: "To advance to a new Seed Stage, a planet must achieve a Universal Alignment Score (UAS) of at least:",
                options: ["60%", "75%", "80%", "95%"],
                correctAnswer: "80%",
                explanation: "Article IX-A §6 states that a minimum UAS of 80% is required to advance. The score measures cultural fit, ethics, welfare, and impact."
            },
            {
                question: "Who performs the annual, independent, cross-planet audits to ensure transparency?",
                options: ["The Council of the Universe", "The Purrfect Treasury", "Fixer Labs", "A team of rotating founders"],
                correctAnswer: "Fixer Labs",
                explanation: "Fixer Labs serves as the Universe's independent auditor, responsible for verifying financial accuracy and compliance across all planets (Article IX §3)."
            },
            {
                question: "What is the purpose of the 'Planetary Tithe'?",
                options: ["To fund the military", "To pay for marketing", "A 1-3% profit contribution to community projects", "To repay initial founder investment"],
                correctAnswer: "A 1-3% profit contribution to community projects",
                explanation: "The Planetary Tithe is a donation of 1-3% of profit that flows into the Universal Treasury Fund (UTF) to seed new planets and provide stability during crises. (IX-A §2.2 B)"
            },
            {
                question: "What is the standard allocation of surplus for Research & Innovation?",
                options: ["10%", "40%", "20%", "30%"],
                correctAnswer: "40%",
                explanation: "Under the Quarterly Surplus Redistribution Guideline (Article IX §1), 40% is allocated to Research & Innovation, for R&D and continuous improvement."
            },
            {
                question: "What are Planet Credits (PCs)?",
                options: ["A form of currency", "Vacation days", "Internal units of ownership from sweat equity", "Company awards"],
                correctAnswer: "Internal units of ownership from sweat equity",
                explanation: "Planet Credits (PCs) are the internal units that represent an employee's ownership stake in their planet, earned through the Sweat Equity program. (Article IX §2)"
            },
            {
                question: "What does the 'Ethical Investment Clause' prohibit?",
                options: ["Investing in competing planets", "Partnerships that harm people, animals, or the environment", "Investing less than a certain amount", "Taking on debt"],
                correctAnswer: "Partnerships that harm people, animals, or the environment",
                explanation: "This clause in Article IX §3 explicitly forbids any partnership or reinvestment that could cause harm, ensuring all financial activities align with core values."
            },
            {
                question: "Who can invest using 'Seed Tokens'?",
                options: ["Anyone", "Only founders", "Friends & Family during early stages", "Accredited external investors"],
                correctAnswer: "Friends & Family during early stages",
                explanation: "Seed Tokens are a specific, non-tradable investment vehicle for friends and family to support a planet during its Seed 1-2 stages. (Article IX-A §4.2)"
            },
            {
                question: "In the profit redistribution hierarchy (Article IX-B), what happens immediately after verifying the 5% profit cap?",
                options: ["Pay out all investors", "A minimum of 40% of surplus is reinvested", "Give bonuses to the founders", "Donate to the USP"],
                correctAnswer: "A minimum of 40% of surplus is reinvested",
                explanation: "Article IX-B §3 specifies a clear hierarchy. After the Compliance Layer (checking the cap), the next step is the Reinvestment Layer, where at least 40% of surplus goes back into the planet."
            },
            {
                question: "Which two groups govern the Universal Support Pool (USP)?",
                options: ["Founders and Fixer Labs", "Treasury and Planet Leaders", "HR and the Council of the Universe", "Marketing and R&D"],
                correctAnswer: "HR and the Council of the Universe",
                explanation: "Article X §3 states that disbursements from the USP are reviewed quarterly by a joint body of HR and the Council of the Universe to ensure funds are used properly."
            },
            {
                question: "What is the purpose of a QSAR?",
                options: ["A report on employee happiness", "A quarterly report on how surplus was allocated", "A sales and marketing report", "A technical systems report"],
                correctAnswer: "A quarterly report on how surplus was allocated",
                explanation: "A Quarterly Surplus Allocation Report (QSAR) is a mandatory transparency document that details a planet's profit, surplus, and how that surplus was redistributed. (Article IX §3)"
            },
            {
                question: "The ethos of Article X (USP) states that the Universe's strength is measured by what?",
                options: ["Total revenue", "Number of planets", "Retained profit", "The safety of its weakest orbit"],
                correctAnswer: "The safety of its weakest orbit",
                explanation: "Article X §4 concludes with the ethos: 'The Universe’s strength is measured not by retained profit but by the safety of its weakest orbit,' emphasizing collective care."
            },
            {
                question: "Under Article IX-B, what share of surplus is reserved for the 'Community & Compassion Funds'?",
                options: ["5%", "10%", "15%", "20%"],
                correctAnswer: "10%",
                explanation: "The redistribution schema in Article IX-B §3 allocates 10% of the surplus to Community & Compassion Funds, which are governed by the Council and HR for welfare and aid."
            },
        ].sort(() => 0.5 - Math.random()); // Add more questions here...
        
        allQuestions.push(...allQuestions, ...allQuestions.slice(0, 10)); // Duplicate to ensure we can always get 50

        // DOM Elements
        const setupScreen = document.getElementById('setup-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressText = document.getElementById('progress-text');
        const scoreText = document.getElementById('score-text');
        const gradeText = document.getElementById('grade-text');
        const explanationContainer = document.getElementById('explanation-container');
        const explanationText = document.getElementById('explanation-text');
        const resultsSummary = document.getElementById('results-summary');
        const slider = document.getElementById('question-slider');
        const sliderValue = document.getElementById('slider-value');
        
        const questionCounts = [10, 20, 30, 40, 50];

        // State
        let selectedQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];

        // Slider Logic
        slider.addEventListener('input', () => {
            sliderValue.textContent = questionCounts[slider.value];
        });

        // Event Listeners
        startBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', restartQuiz);

        function startQuiz() {
            const numQuestions = questionCounts[slider.value];
            selectedQuestions = allQuestions.slice(0, numQuestions);
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];

            setupScreen.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            displayQuestion();
        }

        function displayQuestion() {
            explanationContainer.classList.add('hidden');
            nextBtn.disabled = true;

            if (currentQuestionIndex < selectedQuestions.length) {
                const question = selectedQuestions[currentQuestionIndex];
                progressText.textContent = `Question ${currentQuestionIndex + 1} of ${selectedQuestions.length}`;
                questionText.textContent = question.question;
                
                optionsContainer.innerHTML = '';
                question.options.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.className = 'option-btn';
                    button.onclick = () => selectAnswer(option, button);
                    optionsContainer.appendChild(button);
                });
            } else {
                showResults();
            }
        }

        function selectAnswer(selectedOption, btn) {
            const question = selectedQuestions[currentQuestionIndex];
            const isCorrect = selectedOption === question.correctAnswer;

            if (isCorrect) {
                score++;
                btn.classList.add('correct');
            } else {
                btn.classList.add('incorrect');
            }
            
            userAnswers.push({
                question: question.question,
                selected: selectedOption,
                correct: question.correctAnswer,
                explanation: question.explanation
            });
            
            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = true;
                if (button.textContent === question.correctAnswer) {
                    button.classList.add('correct');
                }
            });

            explanationText.textContent = question.explanation;
            explanationContainer.classList.remove('hidden');
            nextBtn.disabled = false;
        }

        function nextQuestion() {
            currentQuestionIndex++;
            displayQuestion();
        }

        function showResults() {
            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');

            const percentage = Math.round((score / selectedQuestions.length) * 100);
            scoreText.textContent = `You scored ${score} out of ${selectedQuestions.length} (${percentage}%)`;

            let grade, gradeColor;
            if (percentage >= 90) { grade = "Grade: Cosmic Guardian"; gradeColor = "text-cyan-300"; }
            else if (percentage >= 75) { grade = "Grade: Planet Leader"; gradeColor = "text-green-400"; }
            else if (percentage >= 50) { grade = "Grade: Seed Investor"; gradeColor = "text-yellow-400"; }
            else { grade = "Grade: Curious Observer"; gradeColor = "text-orange-400"; }
            
            gradeText.textContent = grade;
            gradeText.className = `text-xl ${gradeColor} mb-6`;

            // Build summary
            resultsSummary.innerHTML = '<h3 class="font-orbitron text-2xl text-white my-6 text-center">Review Your Answers</h3>';
            userAnswers.forEach((answer, index) => {
                const isCorrect = answer.selected === answer.correct;
                const resultDiv = document.createElement('div');
                resultDiv.className = 'card rounded-lg p-4 mb-4';
                resultDiv.innerHTML = `
                    <p class="font-bold text-white">${index + 1}. ${answer.question}</p>
                    <p class="mt-2 ${isCorrect ? 'text-green-400' : 'text-red-400'}">Your answer: ${answer.selected} ${isCorrect ? '✔' : '✖'}</p>
                    ${!isCorrect ? `<p class="mt-1 text-green-400">Correct answer: ${answer.correct}</p>` : ''}
                    <p class="mt-2 text-sm text-gray-400"><strong class="text-purple-300">Explanation:</strong> ${answer.explanation}</p>
                `;
                resultsSummary.appendChild(resultDiv);
            });
        }

        function restartQuiz() {
            resultsScreen.classList.add('hidden');
            quizScreen.classList.add('hidden');
            setupScreen.classList.remove('hidden');
        }
    </script>
</body>
</html>
